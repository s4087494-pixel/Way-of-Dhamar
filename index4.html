<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Way of Dharma</title>
    <link rel="stylesheet" href="style4.css">
</head>

<body>
    <script src="https://cdn.jsdelivr.net/npm/p5@1.9.0/lib/p5.min.js"></script>
    <script src="ParticlesDraw.js"></script>
    <div class="yinyang">
        <video autoplay loop muted playsinline>
            <source src="assets/animation/yinyang_2.webm" type="video/webm">
        </video>
    </div>
    <div class="texture"></div>
    <div class="fog"></div>
    <div class="white"></div>
    <div class="info-wrap">
        <div class="info">
            <h1>This is not an end.</h1>
            <h1>Nor is it the beginning.</h1>
        </div>

        <div class="info2" style="cursor: pointer;">
            <h2 class="size">The current flows inside you</h2>
            <h3 class="size">Nourishing all that you touch</h3>
            <h4 class="size">In the way of Dharma</h4>
            <h5 class="size">Here you are</h5>
            <h6 class="size">A tender soul.</h6>
        </div>
    </div>
    <script>
        // Hover detection: glow effect when hovering over center area
        const yinyang = document.querySelector('.yinyang');
        const info2 = document.querySelector('.info2');
        
        if (info2 && yinyang) {
            let active = false;
            
            const computeZone = () => {
                const w = window.innerWidth;
                const h = window.innerHeight;
                // Smaller hover zones - only show info2 when mouse is near center
                let zoneWidthPercent = 0.25;
                let zoneHeightPercent = 0.30;
                
                if (w <= 1450) {
                    zoneWidthPercent = 0.35; // Small screens - 35% zone
                    zoneHeightPercent = 0.40;
                } else if (w <= 1650) {
                    zoneWidthPercent = 0.30; // Medium screens - 30% zone
                    zoneHeightPercent = 0.35;
                }
                
                const zw = w * zoneWidthPercent, zh = h * zoneHeightPercent;
                return { x: (w - zw) / 2, y: (h - zh) / 2, w: zw, h: zh };
            };

            let zone = computeZone();
            window.addEventListener('resize', () => { zone = computeZone(); });

            const inZone = (x, y) => x >= zone.x && x <= zone.x + zone.w && y >= zone.y && y <= zone.y + zone.h;

            const activate = () => {
                if (active) return;
                active = true;
                yinyang.classList.add('blurred');
                info2.classList.add('active');
            };

            const deactivate = () => {
                if (!active) return;
                active = false;
                yinyang.classList.remove('blurred');
                info2.classList.remove('active');
            };

            document.body.addEventListener('mousemove', (e) => {
                if (inZone(e.clientX, e.clientY)) activate(); else deactivate();
            }, { passive: true });
            
            // Also add to document for redundancy
            document.addEventListener('mousemove', (e) => {
                if (inZone(e.clientX, e.clientY)) activate(); else deactivate();
            }, { passive: true });
            
            console.log('Hover detection active. Zone:', zone);
            deactivate();

            // Make the whole .info2 clickable and keyboard-accessible to redirect to index.html
            info2.setAttribute('role', 'link');
            info2.tabIndex = 0;
            info2.style.cursor = 'pointer';

            // Add click handler to info2 and all children to ensure clicks are captured
            const handleInfoClick = (e) => {
                console.log('info2 or child clicked, redirecting to index.html', e);
                e.stopPropagation();
                window.location.href = 'index.html';
            };

            info2.addEventListener('click', handleInfoClick, true); // Use capture phase

            // Also capture clicks on all child elements
            info2.querySelectorAll('*').forEach(child => {
                child.addEventListener('click', handleInfoClick, true);
            });

            info2.addEventListener('keydown', (ev) => {
                if (ev.key === 'Enter' || ev.key === ' ') {
                    console.log('info2 key pressed, redirecting to index.html');
                    ev.preventDefault();
                    window.location.href = 'index.html';
                }
            });
        }
    </script>
</body>